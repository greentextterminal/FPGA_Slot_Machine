# FPGA Slot Machine <br>
This repo contains the code for a simple slot machine like game implemented via Verilog on a ZYBO Z7 ZYNQ-7010 development board. The board that I used for this project has certain peripherals which I leverage for the logic of the game such as: LED's, switches, and buttons. <br>

## Overview of Game
The code cycles an LED which the user has to "catch" with a switch corresponding to the same LED index position during the same clock cycle in order to win. If the game is won the LEDs will all flash indicating a win until it is reset. The game can be reset and played again by pressing BTN2 (Button 2).

### Clock Divider
The clock being used is 125MHz being supplied to pin K17 (https://digilent.com/reference/programmable-logic/zybo-z7/reference-manual), for the purposes of the game, the same clock drives the always block which toggles the LED positions via case states. If we did not reduce the clock rate then the LEDs would toggle at the same frequency which would make the game unplayable and to the user the LEDs would toggle so quickly that it would seem as if they were all on at the same time. We remedy this with a clock divider. By taking the onboard clock and creating a counter which counts up and stores the count in a register of a certain bit width (n), we can create a divided (reduced) clock signal controlled by parameter n and control the frequency of the clock. We find the value of n by solving the equation: $$125* 10^{6}/2^{n}=1$$
This equation is the initial clock frequency divided by 2 to the power of n bits and equalled to a desired frequency of 1Hz, since we would like to achieve a frequency of around 1Hz for our game, and the 2 is the number of values that a single bit can take on. Therefore, 2 raised to the power of n bits is the number of values that can be expressed through n bits. Solving this equation for n gives us a value of around 27. The count register needs to have a bit width of 27 expressed as [26:0], but since this module is dependent on a parameter n we express this count as [n:0] with n being the MSB and the 0 being the LSB. The count register is initialized to all zeros. By behavioral modeling we increment the count and because the bit position values that change the "fastest" will be the bits nearest to the LSB (the LSB be being the slowest bit to change) we can say that the nth bit will be the "slowest" to change values from its initiaizlized 0 state to a 1 state. Finally, by driving a wire through an assign statement connected to the nth index position of the count register we create a parameter dependent divided clock signal.

### Positive Edge Detection
The purpose of an edge detection circuit is to create a way to detect the positive edge of a signal, or in our case create a pulse which lasts a single clock cycle when triggered. The way this is achieved is by storing the signal in a register, and then outputting via a continuous assignment the signal anded with the inverted value in the register holding the signal value. Since the register is in an always block triggered by the positive edge of the clock cycle, the register value is delayed by one clock cycle. This means our signal output will last only one clock cycle, if the signal goes high. Using this edge detecting circuit we implement core game design logic. Since a win is registered only when an LED and a switch go high at the same bit index, the problem that occurs is that since the LEDs automatically toggle through all possible LED index positions one at a time, any switch could be simply left on and the LED will eventually hit that switches index and automatically win the game for itself. This defeats the purpose of the slot machine game which requires that a users switch input must be timed just right so that only when the switch goes high at the same time that an LED is at that bit index can the player win. If the player is too late or too early in their switch input, the game cannot be won. If the switch is left on after this failed attempt the game logic must not register this enabled switch. The edge detection circuit allows us to create the game logic such that only if the switch and the LED are enabled at the same clock cycle can the player win the game.
